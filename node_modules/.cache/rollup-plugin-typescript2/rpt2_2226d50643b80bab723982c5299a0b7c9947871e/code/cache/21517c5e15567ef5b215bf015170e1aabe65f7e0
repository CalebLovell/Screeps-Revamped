{"code":"import { log } from '../console/log';\r\nimport { printRoomName } from '../utilities/utils';\r\nimport { Visualizer } from '../visuals/Visualizer';\r\nexport var NotifierPriority;\r\n(function (NotifierPriority) {\r\n    NotifierPriority[NotifierPriority[\"Critical\"] = 0] = \"Critical\";\r\n    NotifierPriority[NotifierPriority[\"High\"] = 1] = \"High\";\r\n    NotifierPriority[NotifierPriority[\"Normal\"] = 2] = \"Normal\";\r\n    NotifierPriority[NotifierPriority[\"Low\"] = 3] = \"Low\";\r\n})(NotifierPriority || (NotifierPriority = {}));\r\n/**\r\n * Records one-time and persistent notifications from various in-game events\r\n */\r\nexport class Notifier {\r\n    constructor() {\r\n        this.alerts = [];\r\n        this.notifications = [];\r\n    }\r\n    clear() {\r\n        this.alerts = [];\r\n    }\r\n    alert(message, roomName, priority = NotifierPriority.Normal) {\r\n        // Register an alert to be displayed this in the notifications visual box\r\n        const alert = { message, roomName, priority };\r\n        this.alerts.push(alert);\r\n    }\r\n    // TODO: finish\r\n    notify(message, roomName, duration = 100, email = false) {\r\n        log.alert(printRoomName(roomName) + ': ' + message);\r\n    }\r\n    // init() {\r\n    //\r\n    // }\r\n    //\r\n    // run() {\r\n    //\r\n    // }\r\n    generateNotificationsList(links = false) {\r\n        const sortedAlerts = _.sortBy(this.alerts, alert => alert.priority);\r\n        return _.map(sortedAlerts, alert => {\r\n            if (alert.roomName) {\r\n                return (links ? printRoomName(alert.roomName) : alert.roomName) + ': ' + alert.message;\r\n            }\r\n            else {\r\n                return alert.message;\r\n            }\r\n        });\r\n    }\r\n    visuals() {\r\n        const notificationMessages = this.generateNotificationsList();\r\n        Visualizer.drawNotifications(notificationMessages);\r\n    }\r\n}\r\n","references":["C:/git/Screeps-Revamped/src/console/log.ts","C:/git/Screeps-Revamped/src/utilities/utils.ts","C:/git/Screeps-Revamped/src/visuals/Visualizer.ts"]}
