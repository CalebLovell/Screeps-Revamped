{"code":"import * as tslib_1 from \"tslib\";\r\nimport { AttackStructurePriorities } from '../../priorities/priorities_structures';\r\nimport { profile } from '../../profiler/decorator';\r\nimport { Visualizer } from '../../visuals/Visualizer';\r\nimport { Directive } from '../Directive';\r\n/**\r\n * Register a target to be dismantled by workers. This is not a siege directive, and clearing rooms should\r\n * be done with the DirectiveRoomClear\r\n */\r\nlet DirectiveDismantle = class DirectiveDismantle extends Directive {\r\n    constructor(flag) {\r\n        super(flag);\r\n    }\r\n    spawnMoarOverlords() {\r\n    }\r\n    getTarget() {\r\n        if (!this.pos.isVisible) {\r\n            return;\r\n        }\r\n        const targetedStructures = this.pos.lookFor(LOOK_STRUCTURES);\r\n        for (const structure of targetedStructures) {\r\n            for (const structureType of AttackStructurePriorities) {\r\n                if (structure.structureType == structureType) {\r\n                    return structure;\r\n                }\r\n            }\r\n        }\r\n    }\r\n    init() {\r\n        // Add this structure to worker overlord's dismantle list\r\n        const target = this.getTarget();\r\n        if (target && !this.colony.overlords.work.dismantleStructures.includes(target)) {\r\n            this.colony.overlords.work.dismantleStructures.push(target);\r\n        }\r\n    }\r\n    run() {\r\n        // Remove the directive once structures have been destroyed\r\n        if (this.pos.isVisible && !this.getTarget()) {\r\n            this.remove();\r\n        }\r\n    }\r\n    visuals() {\r\n        Visualizer.marker(this.pos, { color: 'yellow' });\r\n    }\r\n};\r\nDirectiveDismantle.directiveName = 'dismantle';\r\nDirectiveDismantle.color = COLOR_GREY;\r\nDirectiveDismantle.secondaryColor = COLOR_YELLOW;\r\nDirectiveDismantle = tslib_1.__decorate([\r\n    profile\r\n], DirectiveDismantle);\r\nexport { DirectiveDismantle };\r\n","references":["C:/git/Screeps-Revamped/src/priorities/priorities_structures.ts","C:/git/Screeps-Revamped/src/profiler/decorator.ts","C:/git/Screeps-Revamped/src/visuals/Visualizer.ts","C:/git/Screeps-Revamped/src/directives/Directive.ts"]}
