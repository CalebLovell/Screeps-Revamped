{"code":"import * as tslib_1 from \"tslib\";\r\nimport { log } from '../../console/log';\r\nimport { profile } from '../../profiler/decorator';\r\nimport { Directive } from '../Directive';\r\nimport { NotifierPriority } from '../Notifier';\r\nexport const TERMINAL_STATE_EMERGENCY = {\r\n    name: 'emergency',\r\n    type: 'in',\r\n    amounts: {\r\n        [RESOURCE_ENERGY]: 25000,\r\n        [RESOURCE_CATALYZED_GHODIUM_ALKALIDE]: 3000,\r\n        [RESOURCE_CATALYZED_ZYNTHIUM_ACID]: 3000,\r\n        [RESOURCE_CATALYZED_ZYNTHIUM_ALKALIDE]: 3000,\r\n        [RESOURCE_CATALYZED_LEMERGIUM_ALKALIDE]: 3000,\r\n        [RESOURCE_CATALYZED_LEMERGIUM_ACID]: 3000,\r\n        [RESOURCE_CATALYZED_KEANIUM_ALKALIDE]: 3000,\r\n        [RESOURCE_CATALYZED_UTRIUM_ACID]: 3000,\r\n    },\r\n    tolerance: 500\r\n};\r\nconst EMERGENCY_STATE_TIMEOUT = 10000;\r\n/**\r\n * Put the colony's terminal in an emergency state, which maintains supplies of T3 boots during defensive operations\r\n */\r\nlet DirectiveTerminalEmergencyState = class DirectiveTerminalEmergencyState extends Directive {\r\n    constructor(flag) {\r\n        super(flag);\r\n        this.refresh();\r\n    }\r\n    refresh() {\r\n        super.refresh();\r\n        // Register abandon status\r\n        this.terminal = this.pos.lookForStructure(STRUCTURE_TERMINAL);\r\n        if (this.terminal) {\r\n            Overmind.terminalNetwork.registerTerminalState(this.terminal, TERMINAL_STATE_EMERGENCY);\r\n        }\r\n        if (Game.time % 25 == 0) {\r\n            log.alert(`${this.pos.print}: emergency terminal state active!`, NotifierPriority.High);\r\n        }\r\n    }\r\n    spawnMoarOverlords() {\r\n    }\r\n    init() {\r\n        this.alert('Emergency terminal state active!');\r\n    }\r\n    run() {\r\n        // Incubation directive gets removed once the colony has a command center (storage)\r\n        if (!this.colony || !this.terminal || Game.time > (this.memory[\"T\" /* TICK */] || 0) + EMERGENCY_STATE_TIMEOUT) {\r\n            this.remove();\r\n        }\r\n    }\r\n};\r\nDirectiveTerminalEmergencyState.directiveName = 'emergencyState';\r\nDirectiveTerminalEmergencyState.color = COLOR_BROWN;\r\nDirectiveTerminalEmergencyState.secondaryColor = COLOR_ORANGE;\r\nDirectiveTerminalEmergencyState = tslib_1.__decorate([\r\n    profile\r\n], DirectiveTerminalEmergencyState);\r\nexport { DirectiveTerminalEmergencyState };\r\n","references":["C:/git/Overmind/src/console/log.ts","C:/git/Overmind/src/profiler/decorator.ts","C:/git/Overmind/src/directives/Directive.ts","C:/git/Overmind/src/directives/Notifier.ts"]}
